{% extends "base.html" %}
{% load static %}

{% block content %}

<div class="container-fluid p-0 mx-auto" id="image-container">
    <img src="https://res.cloudinary.com/stipaxa/image/upload/v1744210543/Gerbet_and_co/account.webp"
    class="img-fluid" alt="Account banner image">
</div>

<div class="container my-5 pb-5">
    <h2 class="text-center mb-5 purple-text-75">My Account</h2>


    <div class="d-flex flex-column justify-content-center align-items-center gap-4">
        <div class="card-container">
            <div class="order-list-card card h-100 text-center p-4 shadow-sm border border-opacity-50">
                <div class="mb-3">
                    <i class="bi bi-geo-alt fs-1 rose-silk-100"></i>
                </div>
                <h5 class="mb-4 rose-silk-100">Deliveries at the Door</h5>
                <p class="purple-text-65 mb-5">
                    See what you've ordered, what's arrived, <br>and what made your day sweeter.
                </p>

                {% if orders %}
                    <ul class="list-group list-group-flush">
                        {% for order in orders %}
                            <li class="list-group-item border-0 px-0">
                                <div class="card border border-opacity-50 shadow-sm">
                                    <div class="card-header text-end">
                                        <span class="purple-text-75">#{{ order.order_id }}</span>
                                    </div>
                                    <div class="card-body ms-3 mt-3">
                                        <div class="row mb-2 justify-content-start">
                                            <div class="col-4 fw-semibold purple-text-65 text-start">Status</div>
                                            <div class="col-8 fw-bold purple-text-75 text-start">{{ order.status|title }}</div>
                                        </div>
                                        <div class="row mb-2 justify-content-start">
                                            <div class="col-4 fw-semibold purple-text-65 text-start">Date</div>
                                            <div class="col-8 fw-bold purple-text-75 text-start">{{ order.created_at|date:"F d, Y" }}</div>
                                        </div>
                                        <div class="row mb-3 justify-content-start">
                                            <div class="col-4 fw-semibold purple-text-65 text-start">Total</div>
                                            <div class="col-8 fw-bold purple-text-75 text-start">&#8364; {{ order.grand_total }}</div>
                                        </div>
                                        <div class="text-end">
                                            <a href="{% url 'order_view' order.id %}" class="btn profile-change-btn d-inline-flex align-items-center gap-2 px-3 mb-3 me-3">
                                                <i class="bi bi-receipt fs-5"></i>
                                                <span>View Details</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p class="text-center purple-text-75 fs-5 mt-3">No orders placed yet.</p>
                {% endif %}
            </div>
        </div>

        <div>
            <a href="{% url 'account' %}" class="btn back-to-account-btn d-inline-flex align-items-center gap-2 mt-3">
                <i class="bi bi-person-circle fs-4"></i>
                <span>Back to My Account</span>
            </a>
        </div>
    </div>
</div>
{% endblock %}
